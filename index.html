<head>
<title>Deloitte POC</title>
<style>
	.container {
		position: relative;
		width: 100%;
		overflow: hidden;
	}
	.container video, .container img#canvas, .container img.canvas_inter {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
	}
	.container img {
		z-index: 10;
	}

	.container video {
		z-index: 5;
	}

	div.button_container {
		position: absolute;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		z-index: 5;
	}

	div.button_container div {
		position: absolute;
		width: 33.3%;
		top: 50%;
		z-index: 10;
		cursor: pointer;
	}

	div.button_container div > img {
		max-width: 350px;
		width: 100%;
	}

	#btn1 {
		left: 0;
	}

	#btn2 {
		left: 33.3%;
	}

	#btn3 {
		left: 66.6%;
	}

	div.button_container img.canvas_inter {
		position: absolute;
		left: 0;
		top: 0;
		z-index: 5;
	}

</style>
<script src="js/jquery.js"></script>	
</head>
<!-- Body -->
<body>
	<div class="container">
		<img id="canvas" src="src/Test_click_play.jpg" />
		<div class="button_container">
			<img class="canvas_inter" src="src/TEST_button.jpg" />
			<div id="btn1">
				<img src="src/Button1.png" />
			</div>
			<div id="btn2">
				<img src="src/Button2.png" />
			</div>
			<div id="btn3">
				<img src="src/Button3.png" />
			</div>
		</div>
		<video id="intro" control muted src="src/Test-intro.mp4" type="video/mp4"></video>
	</div>
</body>

<script>
	$(document).ready(function(){
		let canvas = {
			"width": $("#canvas").width(),
			"height": $("#canvas").height()
		};

		$(".container").width(canvas.width).height(canvas.height);

		// button layer containers
		let height = $(".button_container div").height();
		let width = $(".button_container div").width();
		let i_width = $(".button_container div > img").width();
		// vertical align
		$(".button_container div").css("margin-top", -height/2);
		// button layer left / right align
		$(".button_container div > img").css("margin-left", (width-i_width)/2);

		// click intro to start video		
		$("#canvas").on('click', function() {
			$("#intro").trigger('play');
			$(this).animate({
				opacity: 0
			}, 1000, function() {
				// animation complete;
				$("#canvas").css("z-index", 0).css("opacity", 1);
				
			});
		});

	    $('#intro').on('ended',function(){
	      	$(".button_container").css("opacity", 0).css("z-index", 10);

	      	// fade out to 3 buttons
	      	$(".button_container").animate({
				opacity: 1
			}, 1000, function() {
				// animation complete;
				$(".button_container").css("opacity", 1);
				
			})
	    });

	    $("#btn1").on('click', function() {
	    	$("#intro").attr("src", "src/Test-button1.mp4");
	    	$("#intro")[0].load();
	    	// 
	    	$("#intro").trigger('play');
	    	$(".button_container").animate({
				opacity: 0
			}, 1000, function() {
				// animation complete;
				$(".button_container").css("z-index", 0).css("opacity", 1);
				
			});
	    });
	    
	    $("#btn2").on('click', function() {
	    	$("#intro").attr("src", "src/Test-button2.mp4");
	    	$("#intro")[0].load();
	    	// 
	    	$("#intro").trigger('play');
	    	$(".button_container").animate({
				opacity: 0
			}, 1000, function() {
				// animation complete;
				$(".button_container").css("z-index", 0).css("opacity", 1);
				
			});
	    });

	    $("#btn3").on('click', function() {
	    	$("#intro").attr("src", "src/Test-button3.mp4");
	    	$("#intro")[0].load();
	    	// 
	    	$("#intro").trigger('play');
	    	$(".button_container").animate({
				opacity: 0
			}, 1000, function() {
				// animation complete;
				$(".button_container").css("z-index", 0).css("opacity", 1);
				
			});
	    });
  });
</script>
